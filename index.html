<!DOCTYPE html>
<html>
<head>
    <title>Perfect Tic Tac Toe</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="js/jquery.js"></script>
    <style type="text/css">

    </style>
</head>
<body>
<div class="text-center">
    <h2>I am perfect. But you can try to beat me</h2>
</div>
<div id="wrapper">
    <div id="tic-tac-toe">
        <div id="top" class="bottom-border">
            <div class="box border-right"></div>
            <div class="box border-right"></div>
            <div class="box"></div>
        </div>
        <div id="middle" class="bottom-border">
            <div class="box border-right" style="clear:both"></div>
            <div class="box border-right"></div>
            <div class="box"></div>
        </div>
        <div id="bottom">
            <div class="box border-right" style="clear:both"></div>
            <div class="box border-right"></div>
            <div class="box"></div>
        </div>
    </div>
    <!--<div id="footer">-->
    <!--<div id="footer-left"><img src="images/computer.png"><br/>-->
    <!--<div class="text-center">-->
    <!--<h4>Me</h4>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div id="footer-middle">-->
    <!--<div class="text-center">-->
    <!--<h4>Who Will go first?</h4>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div id="footer-right"><img src="images/person.png"><br/>-->
    <!--<div class="text-center">-->
    <!--<h4>You</h4>-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->
    <div id="footer" class="row">
        <div class="col-md-3"><img src="images/computer.png" class="img-circle img-responsive">
            <div class="text-center">
                <h4>Me</h4>
            </div>
        </div>
        <div class="col-md-6">
            <div class="text-center">
                <h4>Who Will go first?</h4>
            </div>
        </div>
        <div class="col-md-3"><img src="images/person.png" class="img-circle img-responsive">
            <div class="text-center">
                <h4>You</h4>
            </div></div>
    </div>
</div>
<script type="text/javascript" src="nextMove.js"></script>
<script type="text/javascript">
    var started = false;
    var turn = 'x.png';

    var board = function () {
        var boxes = $('.box');
        var boardPosition = new Array();
        for (var i = 0; i < boxes.length; i++) {
            if ($(boxes[i]).find('img').length > 0) {
                if ($(boxes[i]).find('img').attr('src') === 'x.png') {
                    boardPosition.push('X');
                } else {
                    boardPosition.push('O');
                }
            } else {
                boardPosition.push('_');
            }
        }
        return boardPosition;
    }

    $('.box').mouseenter(function () {
        if ($(this).find('img').length == 0) {
            $(this).prepend($('<img>', {id: 'theImg', src: "images/" + turn, permanent: 'false'}));
        }
    });
    $('.box').mouseleave(function () {
        if ($(this).find('img').length > 0 && $(this).find('img').attr('permanent') === 'false') {
            $(this).children().remove('img');
        }
    });
    $('.box').click(function () {
        if ($(this).find('img').length == 0 && started) {
            $(this).prepend($('<img>', {id: 'theImg', src: "images/" + turn, permanent: 'true'}));
            console.log(board());
            if (turn == 'o.png') {
                console.log(nextMove('X', board()));
            } else {
                console.log(nextMove('O', board()));
            }
        } else if ($(this).find('img').length > 0 && $(this).find('img').attr('permanent') === 'false' && started) {
            $(this).find('img').attr('permanent', 'true')
            console.log(board());
            if (turn == 'o.png') {
                console.log(nextMove('X', board()));
            } else {
                console.log(nextMove('O', board()));
            }
        }


    });
    $('#footer-left > img').click(function () {
        if (!started) {
            started = true;
            turn = 'o.png';
            $('#footer-left > img').css('opacity', '0');
            $('#footer-right > img').css('opacity', '0');
            $('#footer-middle').css('opacity', '0');
            // call	api for board mext move
        }
    });
    $('#footer-right > img').click(function () {
        if (!started) {
            started = true;
            turn = 'x.png';
            $('#footer-left > img').css('opacity', '0');
            $('#footer-right > img').css('opacity', '0');
            $('#footer-middle').css('opacity', '0');
        }
        ;
    });

</script>
</body>

</html>